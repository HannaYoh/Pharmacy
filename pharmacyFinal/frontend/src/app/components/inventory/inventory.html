<div class="container" style="margin: 24px auto; max-width: 720px">
  <div class="card">
    <div class="card-body">
      <h2 class="auth-title">Inventory</h2>
      <p class="auth-subtitle">Add or update medicines</p>
      <form (ngSubmit)="add()">
        <label>Medicine Name</label>
        <input [(ngModel)]="newItem.name" name="name" required />

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px">
          <div>
            <label>Price</label>
            <input type="number" [(ngModel)]="newItem.price" name="price" min="0" />
          </div>
          <div>
            <label>Quantity</label>
            <input type="number" [(ngModel)]="newItem.quantity" name="quantity" min="0" />
          </div>
        </div>

        <div class="actions" style="margin-top: 8px">
          <button class="btn primary" type="submit">Add to Stock</button>
        </div>
      </form>

      <div style="margin-top: 16px">
        <h3 style="margin: 0 0 8px">Current Stock</h3>
        <div class="card">
          <div class="card-body">
            <div
              style="
                display: grid;
                grid-template-columns: 2fr 1fr 1fr 1fr;
                gap: 12px;
                font-weight: 600;
              "
            >
              <div>Name</div>
              <div>Price</div>
              <div>Quantity</div>
              <div>Actions</div>
            </div>
            <div
              *ngFor="let i of items; let idx = index"
              style="
                display: grid;
                grid-template-columns: 2fr 1fr 1fr 1fr;
                gap: 12px;
                align-items: center;
                padding: 10px 0;
                border-top: 1px solid var(--border);
              "
            >
              <div>{{ i.name }}</div>
              <div>${{ i.price | number : '1.2-2' }}</div>
              <div>{{ i.quantity }}</div>
              <div>
                <button
                  class="btn"
                  (click)="
                    editIndex = idx;
                    editItem = { name: i.name, price: i.price, quantity: i.quantity }
                  "
                >
                  Edit
                </button>
                <button class="btn" style="margin-left: 8px" (click)="items.splice(idx, 1)">
                  Delete
                </button>
              </div>
            </div>
            <div
              *ngIf="editIndex !== null"
              style="border-top: 1px solid var(--border); margin-top: 8px; padding-top: 8px"
            >
              <h4 style="margin: 0 0 8px">Edit Item</h4>
              <form (ngSubmit)="items[editIndex!] = editItem; editIndex = null">
                <label>Medicine Name</label>
                <input [(ngModel)]="editItem.name" name="edit_name" required />
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px">
                  <div>
                    <label>Price</label>
                    <input type="number" [(ngModel)]="editItem.price" name="edit_price" min="0" />
                  </div>
                  <div>
                    <label>Quantity</label>
                    <input
                      type="number"
                      [(ngModel)]="editItem.quantity"
                      name="edit_quantity"
                      min="0"
                    />
                  </div>
                </div>
                <div class="actions" style="margin-top: 8px">
                  <button class="btn primary" type="submit">Save</button>
                  <button
                    class="btn"
                    type="button"
                    style="margin-left: 8px"
                    (click)="editIndex = null"
                  >
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
